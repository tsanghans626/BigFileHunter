<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs"
     xmlns:ui="http://wixtoolset.org/schemas/v4/wxs/ui">
  <Package Name="BigFileHunter"
           Manufacturer="BigFileHunter"
           Version="$(var.Version)"
           UpgradeCode="01dde612-e825-4dd2-84bd-1a61a0f48813"
           Language="1033">

    <MediaTemplate EmbedCab="yes" />

    <!-- Add UI for installation (disabled for local builds, enabled in GitHub workflow) -->
    <Property Id="WIXUI_INSTALLDIR" Value="INSTALLFOLDER" />

    <!-- UI enabled for local builds (requires WixToolset.UI.wixext) -->
    <ui:WixUI Id="WixUI_InstallDir" />

    <!-- Add MajorUpgrade for version handling -->
    <MajorUpgrade DowngradeErrorMessage="A newer version of BigFileHunter is already installed." />

    <!-- Installation directory structure - use ProgramFilesFolder for all arch -->
    <!-- WiX v4 automatically handles architecture when -arch is specified -->
    <StandardDirectory Id="ProgramFilesFolder">
      <Directory Id="INSTALLFOLDER" Name="BigFileHunter" />
    </StandardDirectory>

    <StandardDirectory Id="ProgramMenuFolder">
      <Directory Id="ApplicationProgramsFolder" Name="BigFileHunter"/>
    </StandardDirectory>

    <StandardDirectory Id="DesktopFolder" />

    <!-- Features for installation -->
    <Feature Id="ProductFeature" Title="BigFileHunter" Level="1">
      <ComponentGroupRef Id="ProductComponents" />
      <ComponentGroupRef Id="ShortcutComponents" />
    </Feature>
  </Package>
</Wix>
